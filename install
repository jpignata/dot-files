#!/bin/sh

# Update submodules
git submodule update --init

# Copy dotfiles from dot/
for item in $(find dot ! -ipath '**/.*'); do
  target=~/`echo $item | sed -e 's@dot/*@.@'`

  if [ -d $item ]; then
    test -d $target || mkdir -p $target
  elif [ -f $item ]; then
    echo "Copying ${item} to ${target}" 
    cp $item $target
  fi
done

# Ensure ~/bin exists
mkdir -p ~/bin

# Copy items from bin/
for item in $(ls bin); do
  target=~/bin/$item
  echo "Copying bin/${item} to ${target}"   
  cp ./bin/$item $target
done

# Update environment
. ~/.bashrc

# Build vim plugins
rvm use system
cd ~/.vim/bundle/command-t && rake make
